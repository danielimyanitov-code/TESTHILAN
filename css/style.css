/* ========= בסיס ========= */
:root{
  --bg: #0b1020;
  --surface: #0f172a;
  --panel: #0b1226;
  --card: #111827;
  --muted: #94a3b8;
  --text: #e5e7eb;
  --primary: #60a5fa;
  --primary-2: #3b82f6;
  --ok: #34d399;
  --warn: #f59e0b;
  --err: #ef4444;
  --border: #1f2937;

  --shadow: 0 10px 30px rgba(2,6,23,.25);
  --radius: 14px;
}

@media (prefers-color-scheme: light){
  :root{
    --bg: #eff6ff;
    --surface: #f8fafc;
    --panel: #f1f5f9;
    --card: #ffffff;
    --muted: #64748b;
    --text: #0f172a;
    --primary: #2563eb;
    --primary-2: #1d4ed8;
    --ok: #10b981;
    --warn: #f59e0b;
    --err: #ef4444;
    --border: #e5e7eb;
    --shadow: 0 8px 24px rgba(2,6,23,.08);
  }
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:'Rubik',system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,'Noto Sans',sans-serif;
  background:
    radial-gradient(1200px 600px at 80% -20%, rgba(99,102,241,.25), transparent 60%),
    radial-gradient(1000px 500px at 10% -10%, rgba(14,165,233,.16), transparent 60%),
    linear-gradient(180deg, var(--surface), var(--bg) 120%);
  color:var(--text);
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.page{display:flex;flex-direction:column;min-height:100vh}
.container{max-width:1200px;margin-inline:auto;padding:24px}

/* ========= Header ========= */
.site-header{
  position:sticky;top:0;z-index:10;
  background:linear-gradient(180deg, rgba(2,6,23,.75), rgba(2,6,23,.45));
  backdrop-filter: blur(8px);
  border-bottom:1px solid var(--border);
}
.site-header .container{display:flex;align-items:center;justify-content:space-between;gap:16px}
.brand{display:flex;align-items:center;gap:16px}
.logo{
  width:44px;height:44px;border-radius:12px;
  background:linear-gradient(135deg, var(--primary), var(--primary-2));
  display:grid;place-items:center;color:white;font-weight:700;box-shadow:var(--shadow)
}
.titles h1{margin:0;font-size:22px}
.subtitle{margin:0;color:var(--muted);font-size:14px}
.header-actions{display:flex;gap:10px}

/* ========= Cards & Grid ========= */
.main-grid{display:grid;grid-template-columns:360px 1fr;gap:24px;margin-top:24px}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)), var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
}
.card-header{padding:18px 20px;border-bottom:1px solid var(--border)}
.card-header .muted{margin-top:4px}
.card-section{padding:18px 20px}
.space-between{display:flex;align-items:center;justify-content:space-between;gap:16px}

/* ========= Upload ========= */
.upload-panel .upload-zone{
  margin:20px; border:1.5px dashed var(--border); border-radius:12px;
  min-height:180px; display:grid; place-items:center; text-align:center;
  background:
    radial-gradient(500px 200px at 10% 0%, rgba(99,102,241,.12), transparent 60%),
    radial-gradient(400px 200px at 100% -10%, rgba(14,165,233,.12), transparent 60%);
  transition: .2s ease;
  cursor:pointer;
}
.upload-zone:hover{border-color:var(--primary); transform:translateY(-1px)}
.upload-zone:focus-visible{outline:2px solid var(--primary)}
.upload-illustration .icon{font-size:40px;margin-bottom:10px}
.upload-illustration .hint{font-size:15px}
.upload-illustration .hint .link{color:var(--primary);text-decoration:underline}
.upload-illustration .small{font-size:12px;margin-top:6px}
.file-input{display:none}

.status-panel{padding:0 20px 18px 20px}
.status{display:none;gap:8px;align-items:center;font-size:14px}
.status .spinner{
  width:14px;height:14px;border-radius:50%;border:2px solid rgba(255,255,255,.25);
  border-top-color:var(--warn);animation:spin 1s linear infinite
}
.status .dot{width:10px;height:10px;border-radius:50%}
.status .ok{background:var(--ok)} .status .err{background:var(--err)}
.status.show{display:flex}
@keyframes spin{to{transform:rotate(360deg)}}

.tips{padding:0 20px 20px 20px}
.tip{
  background:linear-gradient(180deg, rgba(16,185,129,.1), transparent 80%);
  border:1px solid rgba(16,185,129,.25); padding:10px 12px; border-radius:10px; font-size:13px;
}

/* ========= Table ========= */
.table-wrap{padding:0 20px 10px 20px}
.data-table{
  width:100%; border-collapse:separate; border-spacing:0 10px;
}
.data-table thead th{
  text-align:center; font-weight:600; font-size:13px; color:var(--muted); padding:8px 6px;
}
.data-table tbody tr{
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)), var(--panel);
  border:1px solid var(--border); border-radius:12px; overflow:hidden;
  box-shadow: 0 4px 12px rgba(2,6,23,.18);
}
.data-table tbody td{
  padding:12px 10px; text-align:center; font-size:14px;
}
.data-table tbody tr:hover{transform:translateY(-1px); transition:transform .15s ease}
.data-table tbody tr td:first-child{font-weight:500;text-align:right}

/* ========= Inputs ========= */
.label{display:block;margin-bottom:6px;font-size:13px;color:var(--muted)}
.input-affix{display:flex;align-items:center;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:var(--panel)}
.input-affix input{
  all:unset; padding:10px 12px; min-width:120px; direction:ltr; text-align:left; font-variant-numeric:tabular-nums;
}
.input-affix .affix{
  padding:10px 12px; background:rgba(99,102,241,.08); color:var(--muted); border-inline-start:1px solid var(--border);
}
.field input, .hours-input{
  width:100%; border:1px solid var(--border); background:var(--panel); color:var(--text);
  border-radius:12px; padding:10px 12px; font-size:14px; direction:ltr; text-align:center; font-variant-numeric:tabular-nums;
}
.field input:focus, .hours-input:focus{outline:2px solid var(--primary); outline-offset:0}

/* ========= Summary ========= */
.summary{
  background:linear-gradient(180deg, rgba(59,130,246,.12), rgba(59,130,246,.06));
  border-top:1px solid var(--border);
}
.summary-row{
  display:flex; align-items:center; justify-content:space-between; gap:16px;
}
.summary-label{font-size:14px;color:var(--muted)}
.summary-sub{font-size:13px;color:var(--muted)}
.summary-amount{
  font-size:32px; font-weight:700;
  background: linear-gradient(90deg, var(--primary), #a78bfa);
  -webkit-background-clip: text; background-clip:text; color:transparent;
}

/* ========= Buttons ========= */
.actions{display:flex;gap:10px;padding:0 20px 20px 20px}
.btn{
  appearance:none; border:none; border-radius:12px; padding:10px 16px;
  background:linear-gradient(180deg, rgba(99,102,241,.18), rgba(99,102,241,.12));
  color:var(--text); box-shadow:var(--shadow); cursor:pointer; transition:.15s ease transform, .2s ease filter;
}
.btn:hover{transform:translateY(-1px); filter:brightness(1.05)}
.btn:active{transform:translateY(0)}
.btn-primary{
  background:linear-gradient(180deg, var(--primary), var(--primary-2));
  color:white;
}
.btn-secondary{
  background:linear-gradient(180deg, rgba(14,165,233,.18), rgba(14,165,233,.10));
}
.btn-ghost{
  background:transparent; border:1px solid var(--border); color:var(--muted)
}
.btn-ghost:hover{border-color:var(--primary); color:var(--text)}

/* ========= Footer ========= */
.site-footer{margin-top:auto;border-top:1px solid var(--border);background:linear-gradient(180deg, rgba(2,6,23,.4), rgba(2,6,23,.6))}
.footer-grid{display:flex;align-items:center;justify-content:space-between;gap:16px}
.foot-note{font-size:13px;color:var(--muted)}
.foot-links{display:flex;gap:14px}
.link{color:var(--primary);text-decoration:none}
.link:hover{text-decoration:underline}

/* ========= Password Modal ========= */
.password-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  backdrop-filter: blur(4px);
}

.password-content {
  background: var(--card);
  border-radius: var(--radius);
  padding: 32px;
  text-align: center;
  max-width: 400px;
  width: 90%;
  box-shadow: var(--shadow);
  border: 1px solid var(--border);
  animation: modalSlide 0.3s ease-out;
}

@keyframes modalSlide {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

.password-content h2 {
  margin: 0 0 16px;
  color: var(--text);
  font-size: 24px;
}

.password-content p {
  margin: 0 0 24px;
  color: var(--muted);
  font-size: 16px;
}

.password-input-group {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
}

.password-input-group input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel);
  color: var(--text);
  font-size: 16px;
  transition: border-color 0.2s ease;
}

.password-input-group input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1);
}

.password-error {
  color: var(--err);
  font-size: 14px;
  margin-top: 8px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.password-error:not(:empty) {
  opacity: 1;
}

/* ========= Preview Section ========= */
.preview-content {
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)), var(--panel);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid var(--border);
  margin-top: 16px;
}

.preview-header {
  margin-bottom: 12px;
  color: var(--text);
  font-weight: 600;
  font-size: 14px;
}

.preview-data {
  margin-bottom: 16px;
}

.preview-data code {
  background: var(--surface) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  border-radius: 8px;
  font-size: 13px;
  line-height: 1.5;
  direction: ltr;
  text-align: left;
}

/* ========= Utils ========= */
.muted{color:var(--muted)}
.grid-3{display:grid;grid-template-columns:repeat(3, 1fr);gap:14px}

/* ========= Responsive ========= */
@media (max-width: 1024px){
  .main-grid{grid-template-columns:1fr}
}

@media (max-width: 640px){
  .grid-3{grid-template-columns:1fr}
  .summary-amount{font-size:26px}
  .password-content{padding:24px}
  .password-input-group{flex-direction:column}
  .container{padding:16px}
}

/* ========= Dark/Light Mode Toggle ========= */
.light {
  --bg: #eff6ff;
  --surface: #f8fafc;
  --panel: #f1f5f9;
  --card: #ffffff;
  --muted: #64748b;
  --text: #0f172a;
  --primary: #2563eb;
  --primary-2: #1d4ed8;
  --ok: #10b981;
  --warn: #f59e0b;
  --err: #ef4444;
  --border: #e5e7eb;
  --shadow: 0 8px 24px rgba(2,6,23,.08);
}

/* ========= Animation Enhancements ========= */
.card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 20px 40px rgba(2,6,23,.35);
}

.upload-zone.dragover {
  border-color: var(--primary);
  background: 
    radial-gradient(500px 200px at 10% 0%, rgba(99,102,241,.2), transparent 60%),
    radial-gradient(400px 200px at 100% -10%, rgba(14,165,233,.2), transparent 60%);
  transform: translateY(-2px);
}

.status {
  animation: fadeInUp 0.3s ease-out;
}

@keyframes fadeInUp {
  from { 
    opacity: 0; 
    transform: translateY(10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

/* ========= Accessibility ========= */
.btn:focus-visible,
.input-affix input:focus-visible,
.field input:focus-visible,
.hours-input:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

.upload-zone:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 4px;
}

/* ========= Print Styles ========= */
@media print {
  .site-header,
  .upload-panel,
  .actions,
  .site-footer {
    display: none;
  }
  
  .main-grid {
    grid-template-columns: 1fr;
  }
  
  .card {
    box-shadow: none;
    border: 1px solid #000;
  }
}
